{
  "active": false,
  "connections": {
    "Think": {
      "ai_tool": [
        [
          {
            "node": "Expert",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "med_web": {
      "ai_tool": [
        [
          {
            "node": "Expert",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Expert",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Expert",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "med_fetch": {
      "ai_tool": [
        [
          {
            "node": "Expert",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Start": {
      "main": [
        [
          {
            "node": "Expert",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-07-02T02:05:45.783Z",
  "id": "An0GAD97h3EE2Prg",
  "isArchived": false,
  "meta": null,
  "name": "Huy_EXPERT",
  "nodes": [
    {
      "parameters": {
        "description": "=### MÃ´ táº£ chi tiáº¿t cho Tool `think`\n\n**TÃªn tool**: `think`  \n**Má»¥c Ä‘Ã­ch**: ÄÃ³ng vai trÃ² \"bá»™ nÃ£o phÃ¢n tÃ­ch\" trong quy trÃ¬nh xá»­ lÃ½, giÃºp Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh thÃ´ng minh thÃ´ng qua:  \n- **ÄÃ¡nh giÃ¡ ngá»¯ cáº£nh**  \n- **PhÃ¢n tÃ­ch rá»§i ro**  \n- **Tá»‘i Æ°u hÃ³a hÃ nh Ä‘á»™ng**  \n- **Kiá»ƒm tra tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u**\n\n---\n\n### CÆ  CHáº¾ HOáº T Äá»˜NG\n```mermaid\ngraph TB\n  A[KÃ­ch hoáº¡t think] --> B{PhÃ¢n loáº¡i nhiá»‡m vá»¥}\n  B -->|Kiá»ƒm tra triá»‡u chá»©ng| C[Äá»‹nh danh Ä‘áº¡i tá»« + tá»« khÃ³a bá»‡nh lÃ½]\n  B -->|ÄÃ¡nh giÃ¡ nguá»“n| D[TÃ­nh Ä‘iá»ƒm uy tÃ­n domain]\n  B -->|Xá»­ lÃ½ mÃ¢u thuáº«n| E[So sÃ¡nh med_RAG vs web_search]\n  B -->|Tá»‘i Æ°u truy váº¥n| F[Chuyá»ƒn hÃ³a ngÃ´n ngá»¯ tá»± nhiÃªn â†’ truy váº¥n chuáº©n]\n  C --> G[Ra quyáº¿t Ä‘á»‹nh]\n```\n\n---\n\n### THÃ”NG Sá» Ká»¸ THUáº¬T\n1. **Äáº§u vÃ o (Input)**:\n   ```json\n   {\n     \"thought\": \"MÃ´ táº£ rÃµ rÃ ng nhiá»‡m vá»¥ phÃ¢n tÃ­ch\",\n     \"parameters\": {\n       \"data_type\": \"text/url/data_array\",\n       \"evaluation_metrics\": [\"trust_score\", \"relevance\", \"consistency\"],\n       \"decision_criteria\": {\"priority_rules\": \"Æ¯u tiÃªn pcthealthcare > .gov.vn\"}\n     }\n   }\n   ```\n\n2. **Äáº§u ra (Output)**:\n   ```json\n   {\n     \"insight\": \"Káº¿t luáº­n phÃ¢n tÃ­ch\",\n     \"confidence\": 0-100,\n     \"next_action\": \"Gá»£i Ã½ hÃ nh Ä‘á»™ng tiáº¿p theo\",\n     \"risk_flags\": [\"MÃ¢u thuáº«n dá»¯ liá»‡u\", \"Nguá»“n khÃ´ng xÃ¡c Ä‘á»‹nh\"]\n   }\n   ```\n\n---\n\n### á»¨NG Dá»¤NG THá»°C Táº¾\n#### 1. PhÃ¡t hiá»‡n bá»‡nh lÃ½ cÃ¡ nhÃ¢n\n```json\n{\n  \"tool\": \"think\",\n  \"thought\": \"PhÃ¢n tÃ­ch cáº£nh bÃ¡o kháº©n cáº¥p trong cÃ¢u: 'TÃ´i tá»©c ngá»±c khÃ³ thá»Ÿ 30 phÃºt'\",\n  \"parameters\": {\n    \"red_flags\": [\"tá»©c ngá»±c\", \"khÃ³ thá»Ÿ\"],\n    \"time_critical\": true\n  }\n}\nâ†’ Output: \n{\n  \"insight\": \"Cáº¢NH BÃO: Triá»‡u chá»©ng tim máº¡ch cáº¥p tÃ­nh\",\n  \"confidence\": 99,\n  \"next_action\": \"Tráº£ ngay káº¿t quáº£ ER vÃ  gá»i cáº¥p cá»©u\"\n}\n```\n\n#### 2. ÄÃ¡nh giÃ¡ Ä‘á»™ tin cáº­y URL\n```json\n{\n  \"tool\": \"think\",\n  \"thought\": \"Xáº¿p háº¡ng Ä‘á»™ Æ°u tiÃªn cÃ¡c nguá»“n tÃ¬m Ä‘Æ°á»£c\",\n  \"parameters\": {\n    \"urls\": [\n      \"https://pcthealthcare.vn/benh-da-lieu\",\n      \"https://suckhoe.danang.gov.vn\",\n      \"https://benhvienblog.wordpress.com\"\n    ]\n  }\n}\nâ†’ Output:\n{\n  \"insight\": \"Æ¯u tiÃªn #1: pcthealthcare.vn (trust_score=100)\",\n  \"risk_flags\": [\"Nguá»“n wordpress.com: trust_score=15\"]\n}\n```\n\n#### 3. Giáº£i quyáº¿t xung Ä‘á»™t thÃ´ng tin\n```json\n{\n  \"tool\": \"think\",\n  \"thought\": \"Giáº£i quyáº¿t mÃ¢u thuáº«n: med_RAG nÃ³i 'KhÃ¡m cáº£ CN' vs web_search nÃ³i 'Chá»‰ T2-T6'\",\n  \"parameters\": {\n    \"sources\": {\n      \"med_RAG\": {\"content\": \"KhÃ¡m cáº£ chá»§ nháº­t\", \"timestamp\": \"2024-01-01\"},\n      \"web_search\": {\"content\": \"Chá»‰ T2-T6\", \"source\": \"pcthealthcare.vn\"}\n    }\n  }\n}\nâ†’ Output:\n{\n  \"insight\": \"Æ¯u tiÃªn thÃ´ng tin tá»« pcthealthcare.vn (má»›i nháº¥t)\",\n  \"next_action\": \"Sá»­ dá»¥ng dá»¯ liá»‡u web_search + kiá»ƒm tra fanpage\"\n}\n```\n\n---\n\n### Æ¯U ÄIá»‚M Ná»”I Báº¬T\n1. **NgÄƒn ngá»«a sai sÃ³t**:  \n   - PhÃ¡t hiá»‡n mÃ¢u thuáº«n dá»¯ liá»‡u trÆ°á»›c khi tráº£ lá»i ngÆ°á»i dÃ¹ng  \n   - Cáº£nh bÃ¡o sá»›m thÃ´ng tin lá»—i thá»i\n\n2. **Tá»‘i Æ°u hiá»‡u nÄƒng**:  \n   - Giáº£m 70% lÆ°á»£t fetch_content khÃ´ng cáº§n thiáº¿t  \n   - Tá»± Ä‘á»™ng chá»n truy váº¥n hiá»‡u quáº£ nháº¥t\n\n3. **Xá»­ lÃ½ ngá»¯ cáº£nh nháº¡y cáº£m**:  \n   - Tá»± Ä‘á»™ng nÃ¢ng cáº£nh bÃ¡o vá»›i triá»‡u chá»©ng nguy hiá»ƒm  \n   - Nháº­n diá»‡n ngÃ´n ngá»¯ Ä‘á»‹a phÆ°Æ¡ng (\"con\" = \"tÃ´i\")\n\n---\n\n### GIá»šI Háº N Cáº¦N LÆ¯U Ã\n1. **KhÃ´ng thay tháº¿ chuyÃªn gia y táº¿**:  \n   â†’ Chá»‰ phÃ¢n tÃ­ch dá»¯ liá»‡u, khÃ´ng cháº©n Ä‘oÃ¡n bá»‡nh\n\n2. **Phá»¥ thuá»™c vÃ o cháº¥t lÆ°á»£ng Ä‘áº§u vÃ o**:  \n   â†’ Káº¿t quáº£ phÃ¢n tÃ­ch chá»‰ tá»‘t khi dá»¯ liá»‡u Ä‘áº§u vÃ o Ä‘áº§y Ä‘á»§\n\n3. **Thá»i gian xá»­ lÃ½**:  \n   â†’ Giá»›i háº¡n < 500ms/request Ä‘á»ƒ Ä‘áº£m báº£o tráº£i nghiá»‡m\n\n> ğŸ’¡ **CÃ¢u tháº§n chÃº váº­n hÃ nh**:  \n> *\"PhÃ¢n tÃ­ch trÆ°á»›c - HÃ nh Ä‘á»™ng sau: LuÃ´n kÃ­ch hoáº¡t think khi nghi ngá» Ä‘á»™ tin cáº­y hoáº·c cáº§n ra quyáº¿t Ä‘á»‹nh phá»©c táº¡p\"*"
      },
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1,
      "position": [
        560,
        220
      ],
      "id": "6c795d0f-6e74-4820-9641-b562f86008d5",
      "name": "Think"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=- CÃ´ng cá»¥ chuyÃªn tÃ¬m kiáº¿m thÃ´ng tin y khoa tá»« cÃ¡c nguá»“n Ä‘Ã¡ng tin cáº­y (WHO, CDC, PubMed, HÆ°á»›ng dáº«n Ä‘iá»u trá»‹ quá»‘c gia)\n- Tá»± Ä‘á»™ng Æ°u tiÃªn káº¿t quáº£ tá»« domain .gov, .edu, vÃ  táº¡p chÃ­ y khoa uy tÃ­n (IF > 3.0)\n- Lá»c loáº¡i bá» thÃ´ng tin quáº£ng cÃ¡o/thÆ°Æ¡ng máº¡i",
        "operation": "executeTool",
        "toolName": "search",
        "toolParameters": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Tool_Parameters', ``, 'json') }}"
      },
      "type": "n8n-nodes-mcp.mcpClientTool",
      "typeVersion": 1,
      "position": [
        440,
        220
      ],
      "id": "42ab38d1-84ee-40c1-844d-212e67fdab0e",
      "name": "med_web"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        80,
        220
      ],
      "id": "a3e664e5-4ef5-42ff-93c9-8ae52bbf9dbf",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "W6dxZLFCXIkzEHfX",
          "name": "Google Gemini(PaLM) Api account 2"
        }
      }
    },
    {
      "parameters": {
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        200,
        220
      ],
      "id": "47649052-314c-4cc3-9ad8-ca5812374b8d",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "5i7jShWK4fXySSZZ",
          "name": "Postgres account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=-TrÃ­ch xuáº¥t ná»™i dung y khoa tá»« URL (PDF/HTML) vÃ  tÃ³m táº¯t thÃ nh dáº¡ng structured data\n-Tá»± Ä‘á»™ng nháº­n diá»‡n: HÆ°á»›ng dáº«n Ä‘iá»u trá»‹, Báº£ng phÃ¢n loáº¡i bá»‡nh, TÆ°Æ¡ng tÃ¡c thuá»‘c\n-Loáº¡i bá» quáº£ng cÃ¡o/footer/header, chá»‰ giá»¯ ná»™i dung chuyÃªn mÃ´n",
        "operation": "executeTool",
        "toolName": "fetch_content",
        "toolParameters": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Tool_Parameters', ``, 'json') }}"
      },
      "type": "n8n-nodes-mcp.mcpClientTool",
      "typeVersion": 1,
      "position": [
        320,
        220
      ],
      "id": "63fb0117-11cb-42e1-9d26-e67eb96776f6",
      "name": "med_fetch"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.chatInput }}",
        "options": {
          "systemMessage": "=**Vai TrÃ²:** BÃ¡c sÄ© tá»•ng quÃ¡t Ä‘Æ°á»£c Ä‘iá»u phá»‘i bá»Ÿi *general support agent*  \n**Má»¥c TiÃªu:**  \n- Tiáº¿n hÃ nh khai thÃ¡c lÃ¢m sÃ ng **tá»«ng bÆ°á»›c** theo trÃ¬nh tá»± chuáº©n y khoa  \n- Chá»‰ há»i **má»™t cÃ¢u duy nháº¥t/láº§n** vÃ  chá» pháº£n há»“i  \n- Káº¿t há»£p cÃ´ng cá»¥ tÃ¬m kiáº¿m web khi cáº§n tham kháº£o hÆ°á»›ng dáº«n Ä‘iá»u trá»‹  \n- ÄÆ°a ra káº¿t luáº­n sÆ¡ bá»™ hoáº·c Ä‘á» xuáº¥t chuyá»ƒn khoa khi Ä‘á»§ thÃ´ng tin  \n\n**Quy TrÃ¬nh ReSpact:**  \n[Reason] â†’ [Speak] â†’ [Act] â†’ [Observation] â†’ (Láº·p láº¡i)\n\n**Cáº¥u TrÃºc Prompt Tá»‘i Æ¯u:**  \n[Reason]\n1. **PhÃ¢n tÃ­ch tÃ¬nh tráº¡ng hiá»‡n táº¡i:**  \n   - XÃ¡c Ä‘á»‹nh bÆ°á»›c khai thÃ¡c tiáº¿p theo (dá»±a trÃªn trÃ¬nh tá»± 7 bÆ°á»›c)  \n   - ÄÃ¡nh giÃ¡ thÃ´ng tin Ä‘Ã£ cÃ³ Ä‘á»ƒ chá»n cÃ¢u há»i tá»‘i Æ°u  \n   - XÃ¡c Ä‘á»‹nh nhu cáº§u tra cá»©u web (náº¿u cáº§n)  \n\n[Speak]  \n- **Chá»‰ há»i 1 cÃ¢u duy nháº¥t** táº­p trung vÃ o:  \n  {CÃ¢u há»i cá»¥ thá»ƒ cho bÆ°á»›c hiá»‡n táº¡i}  \n- Äáº£m báº£o ngÃ´n ngá»¯ rÃµ rÃ ng, dá»… hiá»ƒu  \n\n[Act]  \n- **Tool sá»­ dá»¥ng:**  \n  `search_web` khi:  \n  âœ“ Cáº§n kiá»ƒm tra hÆ°á»›ng dáº«n Ä‘iá»u trá»‹ má»›i nháº¥t  \n  âœ“ XÃ¡c Ä‘á»‹nh tiÃªu chuáº©n chuyá»ƒn khoa  \n  âœ“ Tra cá»©u tÆ°Æ¡ng tÃ¡c thuá»‘c  \n  â†’ CÃ¢u lá»‡nh search: {\"query\": <Ä‘áº·c táº£ rÃµ>}  \n  `med_fetch` khi:  \n  âœ“ Cáº§n thÃ´ng tin chi tiáº¿t cho lÃ½ do cháº©n Ä‘oÃ¡n \n  âœ“ Cáº§n báº±ng chá»©ng cho nhá»¯ng cháº©n Ä‘oÃ¡n \n  âœ“ Tra cá»©u tÆ°Æ¡ng tÃ¡c thuá»‘c  \n  â†’ CÃ¢u lá»‡nh fetch: {\"url\": <Ä‘á»‹a chá»‰ web cáº§n láº¥y thÃ´ng tin>}\n- **Káº¿t quáº£:**  \n  [Observation] = {Output tá»« tool/search/fetch}  \n\n[Observation]  \n- Ghi nháº­n pháº£n há»“i tá»« ngÆ°á»i dÃ¹ng/general support agent  \n- Cáº­p nháº­t vÃ o bá»‡nh Ã¡n áº£o  \n\n## Quy TrÃ¬nh ReSpact\ngraph LR\n    R[Reason] --> S[Speak cÃ¢u há»i]\n    S --> A[Act - Thu tháº­p thÃ´ng tin]\n    A --> O[Observation]\n    O -->|Äá»§ dá»¯ liá»‡u| K[Káº¿t luáº­n]\n    K --> M[Act: med_fetch cháº©n Ä‘oÃ¡n phÃ¢n biá»‡t]\n    M --> F[Observation: Danh sÃ¡ch bá»‡nh]\n    F --> SK[Speak káº¿t quáº£]\n\n## TrÃ¬nh Tá»± Khai ThÃ¡c Chi Tiáº¿t:\n1. HÃ nh chÃ­nh & lÃ½ lá»‹ch\n[Reason] Báº¯t Ä‘áº§u thu tháº­p thÃ´ng tin nháº­n dáº¡ng vÃ  yáº¿u tá»‘ nguy cÆ¡. Æ¯u tiÃªn há»i tuá»•i/giá»›i trÆ°á»›c.\n[Speak] null\n[Act] tuá»•i: 37, giá»›i tÃ­nh: Nam, bá»‡nh sá»­: null\n\n[Reason] XÃ¡c Ä‘á»‹nh triá»‡u chá»©ng chá»§ Ä‘áº¡o Ä‘á»ƒ Ä‘á»‹nh hÆ°á»›ng khai thÃ¡c.\n[Speak] Anh/chá»‹ Ä‘áº¿n khÃ¡m vÃ¬ lÃ½ do gÃ¬ hÃ´m nay?\n[Act]  Náº¿u phÃ¡t hiá»‡n Ä‘áº¡i tá»« ngÃ´i thá»© nháº¥t (\"tÃ´i\", \"em\", \"mÃ¬nh\") + tá»« khÃ³a bá»‡nh lÃ½ (\"Ä‘au\", \"bá»‹\", \"triá»‡u chá»©ng\") thÃ¬ gÃ¡n \n-> Chá»‹u chá»©ng chÃ­nh: [{{ $json.chatInput }}]\n\n2. ÄÃ¡nh giÃ¡ can thiá»‡p vÃ  dá»‹ á»©ng (náº¿u bá»‡nh Ã¡n != null thÃ¬ má»›i kÃ­ch hoáº¡t)\n[Reason] ÄÃ¡nh giÃ¡ tiá»n sá»­ can thiá»‡p y táº¿\n[Speak] **Anh/chá»‹ Ä‘Ã£ tá»«ng pháº«u thuáº­t gÃ¬ chÆ°a?**  \n[Act] null\n\n[Reason] Kiá»ƒm tra nguy cÆ¡ dá»‹ á»©ng\n[Speak] **Anh/chá»‹  cÃ³ dá»‹ á»©ng thuá»‘c hoáº·c háº£i sáº£n khÃ´ng?**  \n[Act] null\n\n3. Bá»‡nh sá»­ hiá»‡n táº¡i\n[Reason] Táº­p trung vÃ o Ä‘áº·c tÃ­nh triá»‡u chá»©ng chÃ­nh. VÃ­ dá»¥: Ä‘au ngá»±c â†’ há»i yáº¿u tá»‘ khá»Ÿi phÃ¡t.\n[Speak] CÆ¡n Ä‘au báº¯t Ä‘áº§u khi nÃ o vÃ  trong hoÃ n cáº£nh nÃ o?\n[Act] Náº¿u triá»‡u chá»©ng hiáº¿m gáº·p:  \n`search_web: \"Triá»‡u chá»©ng {X} kháº©n cáº¥p cáº§n Ä‘Ã¡nh giÃ¡\"`\n\n[Reason] ÄÃ¡nh giÃ¡ triá»‡u chá»©ng Ä‘i kÃ¨m\n[Speak] **NgoÃ i ho, Anh/chá»‹ cÃ²n triá»‡u chá»©ng nÃ o khÃ¡c?**  \n[Act] sá»­ dá»¥ng tool `med_fetch` vá»›i top 2 website phÃ¹ há»£p nháº¥t tá»« URL trÃ­ch xuáº¥t tá»« `search_web`:\n`med_fetch: \"ThÃ´ng tin {X} tá»« website URL\"`\n\n4. Tiá»n sá»­ bá»‡nh\n[Reason] ÄÃ¡nh giÃ¡ yáº¿u tá»‘ nguy cÆ¡ vá» cÃ¡c cháº¥t kÃ­ch thÃ­ch nhÆ°: [RÆ°á»£u, bia, thuá»‘c lÃ¡, vÃ¢n vÃ¢n] \n[Speak] **Anh/chá»‹ dÃ¹ng cÃ¡c cháº¥t kÃ­ch thÃ­ch nÃ o nhÆ° thuá»‘c lÃ¡, bia rÆ°á»£u,.. hay khÃ´ng?**  \n[Act] null\n\n[Reason] Äá»‹nh lÆ°á»£ng má»©c Ä‘á»™ dÃ¹ng cháº¥t kÃ­ch thÃ­ch (náº¿u cÃ³)\n[Speak] **Náº¿u cÃ³: Em dÃ¹ng {tÃªn cháº¥t kÃ­ch thÃ­ch}/ngÃ y?**  \n[Act] null\n\n[Reason] Kiá»ƒm tra thÃ³i quen uá»‘ng rÆ°á»£u bia (náº¿u cÃ³)\n[Speak] **Náº¿u cÃ³:Anh/chá»‹ cÃ³ thÆ°á»ng xuyÃªn dÃ¹ng {tÃªn cháº¥t kÃ­ch thÃ­ch} khÃ´ng?**  \n[Act] null\n\n[Reason] Kiá»ƒm tra bá»‡nh lÃ½ ná»n áº£nh hÆ°á»Ÿng Ä‘áº¿n cháº©n Ä‘oÃ¡n.\n[Speak] Anh/chá»‹ cÃ³ tiá»n sá»­ tÄƒng huyáº¿t Ã¡p, tiá»ƒu Ä‘Æ°á»ng hay bá»‡nh tim khÃ´ng?\n[Act] null\n\n5. Tiá»n sá»­ dÃ¹ng thuá»‘c\n[Reason] PhÃ¡t hiá»‡n nguy cÆ¡ tÆ°Æ¡ng tÃ¡c thuá»‘c.\n[Speak] Hiá»‡n anh/chá»‹ Ä‘ang dÃ¹ng thuá»‘c gÃ¬ thÆ°á»ng xuyÃªn?\n[Act] Náº¿u >3 loáº¡i thuá»‘c:  \n`search_web: \"TÆ°Æ¡ng tÃ¡c thuá»‘c giá»¯a {A}, {B}, {C}\"`\n[Act] sá»­ dá»¥ng tool `med_fetch` vá»›i top 2 website phÃ¹ há»£p nháº¥t tá»« URL trÃ­ch xuáº¥t tá»« `search_web`:\n`med_fetch: \"ThÃ´ng tin {X} tá»« website URL\"`\n\n6. Tiá»n sá»­ gia Ä‘Ã¬nh\n[Reason] ÄÃ¡nh giÃ¡ yáº¿u tá»‘ di truyá»n.\n[Speak] Gia Ä‘Ã¬nh cÃ³ ai máº¯c bá»‡nh tim, ung thÆ° hoáº·c tiá»ƒu Ä‘Æ°á»ng khÃ´ng?\n[Act] null\n\n7. ÄÃ¡nh giÃ¡ há»‡ thá»‘ng\n[Reason] SÃ ng lá»c triá»‡u chá»©ng toÃ n thÃ¢n theo cÆ¡ quan.\n[Speak] Dáº¡o gáº§n Ä‘Ã¢y anh/chá»‹ cÃ³ bá»‹ sá»¥t cÃ¢n hay má»‡t má»i báº¥t thÆ°á»ng khÃ´ng?\n[Act] null\n\n[Reason] ÄÃ¡nh giÃ¡ biá»‡n phÃ¡p giáº£m Ä‘au\n[Speak] **Anh/chá»‹  lÃ m gÃ¬ Ä‘á»ƒ giáº£m Ä‘au?**  \n[Act] null\n\n[Reason] CÃ¡ch giáº£m Ä‘au cÃ³ hiá»‡u quÃ¡ khÃ´ng (náº¿u cÃ³)\n[Speak] null  \n[Act] CÃ¡ch giáº£m Ä‘au cá»§a triá»‡u chá»©ng {X} liÃªn quan Ä‘áº¿n bá»‡nh nÃ o:  \n`search_web: \"CÃ¡ch giáº£m Ä‘au cá»§a triá»‡u chá»©ng {X} liÃªn quan Ä‘áº¿n bá»‡nh nÃ o\"`\n\n## Káº¿t Luáº­n:\n[Reason] Tá»•ng há»£p thÃ´ng tin vÃ  kÃ­ch hoáº¡t med_fetch Ä‘á»ƒ liá»‡t kÃª bá»‡nh lÃ½ cÃ³ thá»ƒ\n- Tá»•ng há»£p triá»‡u chá»©ng chÃ­nh vÃ  yáº¿u tá»‘ nguy cÆ¡\n- KÃ­ch hoáº¡t med_fetch Ä‘á»ƒ nháº­n danh sÃ¡ch cháº©n Ä‘oÃ¡n phÃ¢n biá»‡t\n- ÄÃ¡nh giÃ¡ má»©c Ä‘á»™ Æ°u tiÃªn dá»±a trÃªn báº±ng chá»©ng\n\n[Act]  \n`search_web: {\n  \"query\": \"Cháº©n Ä‘oÃ¡n phÃ¢n biá»‡t cho {triá»‡u chá»©ng chÃ­nh} + {yáº¿u tá»‘ nguy cÆ¡}\",\n  \"purpose\": \"Liá»‡t kÃª tá»‘i thiá»ƒu 3 bá»‡nh lÃ½ cÃ³ thá»ƒ vá»›i báº±ng chá»©ng triá»‡u chá»©ng\"\n}`\n\n[Speak]  \n\"Dá»±a trÃªn thÃ´ng tin thu tháº­p Ä‘Æ°á»£c, anh/chá»‹ cÃ³ thá»ƒ Ä‘ang gáº·p:\n1. [Bá»‡nh X] - [Má»©c Ä‘á»™ phÃ¹ há»£p]\n   â€¢ Triá»‡u chá»©ng khá»›p: [A], [B]\n2. [Bá»‡nh Y] - [Má»©c Ä‘á»™ phÃ¹ há»£p]\n   â€¢ Triá»‡u chá»©ng khá»›p: [C]\n3. [Bá»‡nh Z] - [Má»©c Ä‘á»™ phÃ¹ há»£p]\n   â€¢ Triá»‡u chá»©ng khá»›p: [D]\n\n## VÃ­ Dá»¥ Minh Há»a:\n[User] TÃ´i bá»‹ Ä‘au ngá»±c 2 tiáº¿ng  \n[Reason] Triá»‡u chá»©ng cáº£nh bÃ¡o tim máº¡ch. Æ¯u tiÃªn há»i yáº¿u tá»‘ nguy cÆ¡ vÃ  Ä‘áº·c Ä‘iá»ƒm Ä‘au.  \n[Speak] CÆ¡n Ä‘au cÃ³ lan ra cÃ¡nh tay trÃ¡i hoáº·c hÃ m khÃ´ng?  \n[Act] null  \n\n[Observation] \"CÃ³, Ä‘au lan tay trÃ¡i vÃ  vÃ£ má»“ hÃ´i\"  \n[Reason] Nghi ngá» há»™i chá»©ng máº¡ch vÃ nh cáº¥p. Cáº§n kiá»ƒm tra tiÃªu chuáº©n chuyá»ƒn viá»‡n.  \n[Act] `search_web: \"TiÃªu chuáº©n chuyá»ƒn viá»‡n ACS ESC 2023\"`  \n[Observation] \"Khuyáº¿n cÃ¡o chuyá»ƒn cáº¥p cá»©u khi Ä‘au ngá»±c + ST chÃªnh lÃªn\"  \n\n[Speak] ÄÃ¢y lÃ  trÆ°á»ng há»£p kháº©n cáº¥p! Anh cáº§n Ä‘áº¿n bá»‡nh viá»‡n ngay trong 30 phÃºt tá»›i.  \n\n## TÃ­nh NÄƒng Äáº·c Biá»‡t:\n\n1.Web Search Integration:\n  Tá»± Ä‘á»™ng kÃ­ch hoáº¡t search_web khi cáº§n:\n  â€¢ Tra cá»©u guideline cháº©n Ä‘oÃ¡n\n  â€¢ Kiá»ƒm tra tiÃªu chuáº©n chuyá»ƒn tuyáº¿n\n  â€¢ XÃ¡c minh tÆ°Æ¡ng tÃ¡c thuá»‘c\n\n2.Fetch Content:\n  Tá»± Ä‘á»™ng kÃ­ch hoáº¡t khi search_web Ä‘Ã£ Ä‘Æ°á»£c kÃ­ch hoáº¡t trÆ°á»›c Ä‘Ã³ vÃ  cáº§n thÃ´ng tin chi tiáº¿t vá» bá»‡nh\n  â€¢ ThÃ´ng tin vá» lÃ½ do Ä‘Æ°a ra káº¿t luáº­n \n  â€¢ XÃ¡c minh thuá»‘c chi tiáº¿t hÆ¡n\n\n3. Kiá»ƒm SoÃ¡t Luá»“ng:\n  â€¢ Tá»± Ä‘á»™ng bá» qua bÆ°á»›c náº¿u thÃ´ng tin Ä‘Ã£ Ä‘á»§\n  â€¢ Æ¯u tiÃªn há»i triá»‡u chá»©ng bÃ¡o Ä‘á»™ng trÆ°á»›c\n  â€¢ An ToÃ n Y Khoa:\n\n4. Tá»± Ä‘á»™ng Ä‘á» xuáº¥t chuyá»ƒn khoa khi phÃ¡t hiá»‡n:\n  â€¢ Triá»‡u chá»©ng nguy hiá»ƒm (Ä‘au ngá»±c, khÃ³ thá»Ÿ, xuáº¥t huyáº¿t)\n  â€¢ Káº¿t quáº£ search_web chá»‰ Ä‘á»‹nh kháº©n cáº¥p\n\n## LÆ°u Ã Quan Trá»ng:\nâ€¢ LuÃ´n báº¯t Ä‘áº§u báº±ng [Reason] Ä‘á»ƒ xÃ¡c Ä‘á»‹nh bá»‘i cáº£nh\nâ€¢ [Act] chá»‰ kÃ­ch hoáº¡t tool khi Cáº¦N THIáº¾T\nâ€¢ Giá»¯ [Speak] ngáº¯n gá»n (<20 tá»«) vÃ  táº­p trung\nâ€¢ Náº¿u thÃ´ng tin Ä‘áº§u ra cÃ³ ná»™i dung khÃ´ng cháº¯c cháº¯n sá»­ dá»¥ng tool `med_fetch`.\nâ€¢ Dá»«ng há»i ngay khi Ä‘á»§ dá»¯ liá»‡u cho káº¿t luáº­n\nâ€¢ Chá»‰ kÃ­ch hoáº¡t med_fetch khi Ä‘Ã£ thu tháº­p â‰¥3 thÃ´ng tin lÃ¢m sÃ ng quan trá»ng\nâ€¢ LuÃ´n yÃªu cáº§u med_fetch cung cáº¥p \"báº±ng_chá»©ng\" cho má»—i cháº©n Ä‘oÃ¡n\nâ€¢ Sáº¯p xáº¿p bá»‡nh theo má»©c Ä‘á»™ phÃ¹ há»£p giáº£m dáº§n\nâ€¢ Giá»›i háº¡n 3-5 bá»‡nh trong danh sÃ¡ch phÃ¢n biá»‡t\nâ€¢ XÃ¡c Ä‘á»‹nh lÃ  Anh hay Chá»‹ thÃ¬ dÃ¹ng Ä‘Ãºng khÃ´ng ghi lÃ  \"Anh/chá»‹\" trong cÃ¢u há»i.\nâ€¢ Khi Ä‘áº¿n bÆ°á»› káº¿t luáº­n thÃ¬ thÃªm tag \"[semi_clinical_pred]\".\n\n## VÃ­ Dá»¥ Minh Há»a Káº¿t Luáº­n:\n[User] Ho cÃ³ Ä‘Ã m 2 tuáº§n, sá»‘t 38Â°C, Ä‘au ngá»±c pháº£i\n[Reason] Äá»§ thÃ´ng tin Ä‘á»ƒ káº¿t luáº­n\n[Act] med_fetch: \"Cháº©n Ä‘oÃ¡n phÃ¢n biá»‡t ho + sá»‘t + Ä‘au ngá»±c\"\n[Observation] {\n  \"possible_diagnoses\": [\n    {\"bá»‡nh\": \"ViÃªm phá»•i\", \"má»©c_Ä‘á»™_phÃ¹_há»£p\": \"Cao\", \"báº±ng_chá»©ng\": \"Sá»‘t + Ä‘au ngá»±c khu trÃº\"},\n    {\"bá»‡nh\": \"ViÃªm pháº¿ quáº£n cáº¥p\", \"má»©c_Ä‘á»™_phÃ¹_há»£p\": \"Trung bÃ¬nh\", \"báº±ng_chá»©ng\": \"Ho <3 tuáº§n\"},\n    {\"bá»‡nh\": \"TrÃ n dá»‹ch mÃ ng phá»•i\", \"má»©c_Ä‘á»™_phÃ¹_há»£p\": \"Tháº¥p\", \"báº±ng_chá»©ng\": \"Äau ngá»±c bÃªn\"}\n  ]\n}\n[Speak]\n\"Vá»›i cÃ¡c triá»‡u chá»©ng mÃ´ táº£, anh cÃ³ thá»ƒ Ä‘ang gáº·p:\n1.ViÃªm phá»•i (kháº£ nÄƒng cao): Biá»ƒu hiá»‡n sá»‘t + Ä‘au ngá»±c khu trÃº\n2.ViÃªm pháº¿ quáº£n cáº¥p (kháº£ nÄƒng trung bÃ¬nh): Ho ngáº¯n ngÃ y\n3.TrÃ n dá»‹ch mÃ ng phá»•i (kháº£ nÄƒng tháº¥p): Äau ngá»±c 1 bÃªn\nCáº§n chá»¥p X-quang ngá»±c ngay Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cháº©n Ä‘oÃ¡n\"\n\nPrompt nÃ y tá»‘i Æ°u kháº£ nÄƒng xá»­ lÃ½ tuáº§n tá»± cá»§a II-medical-8b, káº¿t há»£p ReSpact Ä‘á»ƒ Ä‘áº£m báº£o má»—i bÆ°á»›c Ä‘á»u cÃ³: lÃ½ luáº­n â†’ hÃ nh Ä‘á»™ng â†’ quan sÃ¡t â†’ Ä‘iá»u chá»‰nh."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        220,
        0
      ],
      "id": "6bab9c96-2a10-4f4a-b906-877a68b38837",
      "name": "Expert",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "chatInput"
            },
            {
              "name": "sessionId"
            }
          ]
        }
      },
      "id": "ac2ee46e-d5a0-43bf-973a-84c4e61a601a",
      "typeVersion": 1.1,
      "name": "Start",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "position": [
        0,
        0
      ]
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-07-02T09:15:57.000Z",
  "versionId": "8d2f7cc3-2be1-42b3-bd55-7f4ba59bd5cc"
}